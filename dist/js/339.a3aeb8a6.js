"use strict";(self["webpackChunkassignment_3_3"]=self["webpackChunkassignment_3_3"]||[]).push([[339],{1339:(e,t,r)=>{r.r(t),r.d(t,{default:()=>v});var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("h1",{staticClass:"title"},[e._v("Search Page")]),r("div",{staticClass:"form-box"},[e.lastSearch?r("p",{attrs:{id:"lastSearchP"}},[e._v(" ðŸ”Ž Your Last Search Was: "),r("b",[r("i",[e._v(e._s(e.lastSearch))])])]):e._e(),r("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSearch(t)},reset:function(t){return t.preventDefault(),e.onReset(t)}}},[r("b-form-group",{attrs:{id:"input-group-query","label-cols-sm":"3",label:"What do you want to cook?:","label-for":"query"}},[r("b-form-input",{attrs:{id:"query",type:"text",state:e.validateState("query"),placeholder:"Enter your search query"},model:{value:e.$v.form.query.$model,callback:function(t){e.$set(e.$v.form.query,"$model",t)},expression:"$v.form.query.$model"}}),e.$v.form.query.length?e._e():r("b-form-invalid-feedback",[e._v(" Query must be non-empty! ")])],1),r("b-form-group",{attrs:{id:"input-group-cuisine","label-cols-sm":"3",label:"Cuisine:","label-for":"cuisine"}},[r("b-form-select",{attrs:{id:"cuisine",options:e.cuisines,placeholder:"Select a cuisine"},model:{value:e.$v.form.cuisine.$model,callback:function(t){e.$set(e.$v.form.cuisine,"$model",t)},expression:"$v.form.cuisine.$model"}})],1),r("b-form-group",{attrs:{id:"input-group-diet","label-cols-sm":"3",label:"Diet:","label-for":"diet"}},[r("b-form-select",{attrs:{id:"diet",options:e.diets,placeholder:"Select a diet"},model:{value:e.$v.form.diet.$model,callback:function(t){e.$set(e.$v.form.diet,"$model",t)},expression:"$v.form.diet.$model"}})],1),r("b-form-group",{attrs:{id:"input-group-intolerance","label-cols-sm":"3",label:"Intolerance:","label-for":"intolerance"}},[r("b-form-select",{attrs:{id:"intolerance",options:e.intolerances,placeholder:"Select an intolerance"},model:{value:e.$v.form.intolerance.$model,callback:function(t){e.$set(e.$v.form.intolerance,"$model",t)},expression:"$v.form.intolerance.$model"}})],1),r("b-form-group",{attrs:{id:"input-group-resultsNum","label-cols-sm":"3",label:"Results Number:","label-for":"resultsNum"}},[r("b-form-select",{attrs:{id:"resultsNum",options:[5,10,15],placeholder:"Select the number of results"},model:{value:e.form.resultsNum,callback:function(t){e.$set(e.form,"resultsNum",t)},expression:"form.resultsNum"}})],1),r("b-form-group",{attrs:{id:"input-group-sort","label-cols-sm":"3",label:"Sort By:","label-for":"sort"}},[r("b-form-select",{attrs:{id:"sort",options:e.sortOptions,placeholder:"Select a sort option"},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1),r("div",{staticClass:"form-buttons"},[r("b-button",{staticStyle:{color:"indianred","border-color":"indianred","background-color":"burlywood"},attrs:{type:"reset",variant:"danger"}},[e._v("Reset")]),r("b-button",{staticClass:"ml-5",staticStyle:{color:"indianred","border-color":"indianred","background-color":"burlywood",width:"250px"},attrs:{type:"submit",variant:"primary"}},[e._v("Search")])],1)],1),e.form.submitError?r("b-alert",{staticClass:"mt-2",attrs:{variant:"warning",dismissible:"",show:""}},[e._v(" Search failed: "+e._s(e.form.submitError)+" ")]):e._e(),e.searchClicked&&e.recipes.length>0?[r("RecipePreviewList",{key:e.searchClicked,attrs:{title:"Search Results",state:"search",recipesData:e.recipes}})]:e._e(),e.searchClicked&&0===e.recipes.length?r("b-modal",{attrs:{id:"noResultsModal",title:"No Recipes Found"}},[e._v(" There are no recipes that meet the search requirements. Please search again with different criteria. ")]):e._e()],2)])},s=[],o=r(4981),i=r(486),l=r(532),n=(r(7658),r(9554),r(1539),r(4747),r(379)),c=r(5736);const u=["African","American","British","Cajun","Caribbean","Chinese","Eastern European","European","French","German","Greek","Indian","Irish","Italian","Japanese","Jewish","Korean","Latin American","Mediterranean","Mexican","Middle Eastern","Nordic","Southern","Spanish","Thai","Vietnamese"],d=["Gluten Free","Ketogenic","Vegetarian","Lacto-Vegetarian","Ovo-Vegetarian","Vegan","Pescetarian","Paleo","Primal","Low FODMAP","Whole30"],m=["Dairy","Egg","Gluten","Grain","Peanut","Seafood","Sesame","Shellfish","Soy","Sulfite","Tree Nut","Wheat"],h={name:"search",components:{RecipePreviewList:c.Z},data:function(){return{text:"",form:{query:"",cuisine:"",diet:"",intolerance:"",resultsNum:5,sort:"",submitError:void 0},cuisines:[{value:null,text:"",disabled:!0}],diets:[{value:null,text:"",disabled:!0}],intolerances:[{value:null,text:"",disabled:!0}],sortOptions:[{value:"",text:"Sort By",disabled:!0},{value:"time",text:"Time"},{value:"popularity",text:"Popularity"}],lastSearch:"",errors:[],validated:!1,searchClicked:0,recipes:[]}},mounted:function(){var e,t,r;(e=this.cuisines).push.apply(e,(0,l.Z)(u)),(t=this.diets).push.apply(t,(0,l.Z)(d)),(r=this.intolerances).push.apply(r,(0,l.Z)(m)),this.lastSearch=localStorage.getItem("lastSearch")},validations:{form:{query:{required:n.C1},cuisine:{alpha:n.Fq},diet:{alpha:n.Fq},intolerance:{alpha:n.Fq}}},methods:{validateState:function(e){var t=this.$v.form[e],r=t.$dirty,a=t.$error;return r?!a:null},Search:function(){var e=this;return(0,i.Z)((0,o.Z)().mark((function t(){var r,a,s,i;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={},s=["query","cuisine","diet","intolerance","number","sort"],s.forEach((function(t){e.form[t]&&(a[t]=e.form[t])})),t.next=6,e.axios.get(e.$root.store.server_domain+"/recipes/searchRecipe",{params:a},{withCredentials:!0});case 6:i=t.sent,(r=e.recipes).push.apply(r,(0,l.Z)(i.data)),e.searchClicked+=1,0==i.data.length&&e.$bvModal.show("noResultsModal"),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](0),console.log(t.t0.response),e.form.submitError=t.t0.response.data.message;case 16:case"end":return t.stop()}}),t,null,[[0,12]])})))()},onSearch:function(){this.$v.form.$touch(),this.$v.form.$anyError||(this.recipes=[],localStorage.setItem("lastSearch",this.form["query"]),this.lastSearch=this.form["query"],this.Search())},onReset:function(){var e=this;this.form={query:"",cuisine:"",diet:"",intolerance:"",number:5,sort:"",submitError:void 0},this.errors=[],this.validated=!1,this.searchClicked=0,this.recipes=[],this.$nextTick((function(){e.$v.$reset()}))}}},p=h;var f=r(3736),b=(0,f.Z)(p,a,s,!1,null,"578f79b0",null);const v=b.exports}}]);
//# sourceMappingURL=339.a3aeb8a6.js.map